<!DOCTYPE html>
<html lang="en" class="dark">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>BrainFart | Interactive Environmental Engineering</title>
Â  <link rel="stylesheet" href="styles.css">
Â  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
Â  <link rel="preconnect" href="https://fonts.googleapis.com" />
Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
Â  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet" />

Â  <style>
    /* New: Define the outer layout grid for Sidebar + Main Content */
    .layout {
        display: grid;
        grid-template-columns: 280px 1fr; /* Fixed 280px sidebar + remaining main content */
        gap: 2rem;
        min-height: 100vh;
        padding: 2rem;
    }
    .sidebar {
        /* This is now correctly positioned in the first grid column */
    }
    .main {
        /* Main content takes the second column and uses its own internal grid */
        min-width: 0; /* Prevents overflow issues */
    }


Â  Â  /* RESPONSIVE GRID â€” RIGHT SIDEBAR NEVER MOVES */
Â  Â  .content-columns {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: 1fr 340px; /* Inner grid for left content + right sticky bar */
Â  Â  Â  gap: 2rem;
Â  Â  Â  align-items: start;
Â  Â  }
Â  Â  .left-column { min-width: 0; }
Â  Â  .right-column {
Â  Â  Â  position: sticky;
Â  Â  Â  top: 2rem;
Â  Â  Â  align-self: start;
Â  Â  }

Â  Â  /* Mobile: stack columns */
Â  Â  @media (max-width: 1024px) {
        /* FIX: Collapse the outer layout grid first */
        .layout {
            grid-template-columns: 1fr; 
            gap: 1rem;
            padding: 1rem;
        }
Â  Â  Â  .content-columns {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  Â  .right-column {
Â  Â  Â  Â  position: static;
Â  Â  Â  Â  align-self: stretch;
Â  Â  Â  }
Â  Â  }

Â  Â  /* Search mode */
Â  Â  .search-active #main-content { display: none !important; }
    /* Keeping inner grid structure for search results */
Â  Â  .search-active .content-columns { grid-template-columns: 1fr 340px !important; }
Â  Â  @media (max-width: 1024px) {
Â  Â  Â  .search-active .content-columns { grid-template-columns: 1fr !important; }
Â  Â  }

Â  Â  /* Modal */
Â  Â  #modal-overlay {
Â  Â  Â  position: fixed; inset: 0; background: rgba(0,0,0,0.8);
Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  z-index: 9999; opacity: 0; visibility: hidden; transition: all 0.3s;
Â  Â  }
Â  Â  #modal-overlay.active { opacity: 1; visibility: visible; }
Â  Â  .modal-content {
Â  Â  Â  background: var(--card); color: var(--text);
Â  Â  Â  width: 90%; max-width: 960px; max-height: 90vh;
Â  Â  Â  border-radius: 0.75rem; overflow: hidden; position: relative;
Â  Â  Â  display: flex; flex-direction: column;
Â  Â  }
Â  Â  #modal-close {
Â  Â  Â  position: absolute; top: 1rem; right: 1.5rem;
Â  Â  Â  background: none; border: none; color: var(--dim);
Â  Â  Â  font-size: 2rem; cursor: pointer; z-index: 10;
Â  Â  }
Â  Â  #modal-close:hover { color: var(--accent); }
Â  Â  #modal-body { padding: 2rem; overflow-y: auto; flex: 1; }

Â  Â  /* Search results */
Â  Â  .search-results { margin-top: 2rem; }
Â  Â  .search-results .card { margin-bottom: 1.5rem; }

Â  Â  /* Carbon tooltip â€” hidden until hover/tap */
Â  Â  .tooltip-box {
Â  Â  Â  opacity: 0; visibility: hidden;
Â  Â  Â  transition: all 0.3s;
Â  Â  }
Â  Â  .group:hover .tooltip-box,
Â  Â  .group:focus-within .tooltip-box {
Â  Â  Â  opacity: 1; visibility: visible;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="layout">
Â  Â  <!-- LEFT SIDEBAR -->
Â  Â  <aside class="sidebar">
Â  Â  Â  <div class="profile">
Â  Â  Â  Â  <div class="avatar"></div>
Â  Â  Â  Â  <div class="cut-text">BrainFart</div>
Â  Â  Â  Â  <p class="name">Glenn Alvin</p>
Â  Â  Â  Â  <p class="bio">Environmental Engineering Â· Indonesia</p>
Â  Â  Â  Â  <p class="tags">Air pollution â€¢ Unconventional energy â€¢ Sustainability</p>
Â  Â  Â  </div>
Â  Â  Â  <nav class="nav">
Â  Â  Â  Â  <a href="#content" class="nav-link">âš¡ï¸ Content</a>
Â  Â  Â  Â  <a href="#data" class="nav-link">ğŸ“Š Live Data Feeds</a>
Â  Â  Â  Â  <a href="#tools" class="nav-link">ğŸ”§ Tools</a>
Â  Â  Â  </nav>
Â  Â  Â  <div class="links">
Â  Â  Â  Â  <h3 class="section-title">connect</h3>
Â  Â  Â  Â  <a href="https://www.linkedin.com/in/glenn-alvin-ab1533255/" target="_blank" class="link glow">linkedin</a>
Â  Â  Â  Â  <a href="mailto:glennalvin17@gmail.com" class="link">email</a>
Â  Â  Â  Â  <a href="#" class="link">resume</a>
Â  Â  Â  </div>
Â  Â  Â  <button id="theme-toggle" class="theme-toggle">
Â  Â  Â  Â  <div class="toggle-track"><div class="toggle-thumb"></div></div>
Â  Â  Â  Â  <span class="toggle-label">toggle theme</span>
Â  Â  Â  </button>
Â  Â  </aside>

Â  Â  <!-- MAIN CONTENT AREA -->
Â  Â  <main class="main">
Â  Â  Â  <div class="content-columns">
Â  Â  Â  Â  <!-- LEFT CONTENT COLUMN (Projects, Tools, etc.) -->
Â  Â  Â  Â  <div class="left-column">
Â  Â  Â  Â  Â  <header>
Â  Â  Â  Â  Â  Â  <h1>Interactive Projects.</h1>
Â  Â  Â  Â  Â  Â  <p>Hi, I'm <strong>Glenn Alvin</strong>, an Indonesian Environmental Engineering student and enthusiastic knowledge-sharer. This site is my personal challenge to simplify complex environmental conceptsâ€”like <strong>air pollution</strong> and <strong>unconventional energy</strong>â€”through interactive models. Hope it's useful!</p>
Â  Â  Â  Â  Â  </header>

Â  Â  Â  Â  Â  <div class="search-section" style="margin:2rem 0;text-align:center;">
Â  Â  Â  Â  Â  Â  <input type="text" id="search-input" placeholder="ğŸ” Search content & tools..." />
Â  Â  Â  Â  Â  Â  <div id="search-results" class="search-results"></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="main-content">
Â  Â  Â  Â  Â  Â  <section id="content">
Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ“š Content</h2>
Â  Â  Â  Â  Â  Â  Â  <div class="grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸŒ IPCC Carbon Counting</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Track Your Footprint:</strong> Estimate your carbon emissions based on IPCC guidelines â€” for individuals, households, and small businesses.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="ipcc-methodology.html" class="btn-material" target="_blank" onclick="window.openModal('ipcc-methodology.html'); return false;">ğŸ“˜ Methodology</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="ipcc-simulator.html" class="btn-simulation" target="_blank">â–¶ï¸ Simulation</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="simulation-red">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ§ª Salinity Gradient Model (RED)</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>The Chemical Waterfall:</strong> Explore how the cost and efficiency of <strong>Reverse Electrodialysis (RED)</strong> membranes affect the viability of drawing energy from mixing fresh and salt water.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="embed-placeholder" id="embed-red">Paste Insight Maker Embed Code Here</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="coming-soon-text">COMING SOON</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="simulation-gpe">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ—ï¸ Gravity Storage Calculator (GPE)</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Storing Energy with Bricks:</strong> A calculator demonstrating the massive mass and height required to store large-scale renewable energy using potential energy.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="embed-placeholder" id="embed-gpe">Paste Looker Studio or Custom Embed Here</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="coming-soon-text">COMING SOON</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  <section id="data">
Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ“Š The Global Carbon Pulse</h2>
Â  Â  Â  Â  Â  Â  Â  <p>Tracking real-time indicators...</p>
Â  Â  Â  Â  Â  Â  Â  <div class="card full">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="embed-placeholder large" id="embed-data">Paste Dashboard Here</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  <section id="tools">
Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ”§ Tools</h2>
Â  Â  Â  Â  Â  Â  Â  <div class="grid">
                <!-- Tool 1: PPTX Placeholder -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="tool-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ“„ PPTX to PDF Converter</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Convert PowerPoint presentations to PDF format â€” no software needed.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="embed-placeholder" id="embed-pptx">Coming Soon</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-material">Documentation</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-simulation">Convert Now</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <!-- Tool 2: PDF Merger -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="tool-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ“š PDF Merger Tool</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Compile multiple PDFs into 1. 100% client-side safe.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="pdf_merger.html" class="btn-simulation" target="_blank">Start Compiling</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <!-- Tool 3: Universal Unit Converter (FIXED CARD) -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="tool-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ§® Universal Unit Converter</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Convert units instantly for Length, Mass, Volume, and Energy. Essential for STEM homework and lab work.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="unit_converter.html" class="btn-simulation" target="_blank">Start Converting</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <!-- Tool 4: Markdown to PDF (Cleaned up placeholder) -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="tool-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ“ Markdown to PDF Report</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Convert formatted notes (.md) into a clean, paginated PDF report.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="markdown_to_pdf.html" class="btn-simulation" target="_blank">Create Report</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </section>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- RIGHT COLUMN (STAYS STICKY) -->
Â  Â  Â  Â  <div class="right-column">
Â  Â  Â  Â  Â  <section id="pulse">
Â  Â  Â  Â  Â  Â  <h2>ğŸŒ Todayâ€™s Pulse â€” For You</h2>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  <div id="location-data" class="loading">ğŸ“ Detecting your location...</div>
Â  Â  Â  Â  Â  Â  Â  <div id="aqi-display" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>City:</strong> <span id="city-name">-</span></p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>AQI:</strong> <span id="aqi-value">-</span> (<span id="aqi-category">-</span>)</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>COâ‚‚:</strong> <span id="co2-value">-</span> ppm</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Temp:</strong> <span id="temp-value">-</span>Â°C</p>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 0.75rem; color: var(--dim); margin-top: 0.5rem; text-align: center;">
Â  Â  Â  Â  Â  Â  Â  Â  ğŸ“Š Data powered by <a href="https://www.iqair.com/air-pollution-data-api" target="_blank" style="color: var(--accent);">IQAir API</a>.
Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  <section id="carbon">
Â  Â  Â  Â  Â  Â  <h2>ğŸŒ¿ Your Carbon Footprint â€” On This Site</h2>
Â  Â  Â  Â  Â  Â  <div class="card relative">
Â  Â  Â  Â  Â  Â  Â  <p>Youâ€™ve been here for <span id="time-spent">0</span> seconds.</p>
Â  Â  Â  Â  Â  Â  Â  <p>Your estimated footprint: <strong><span id="carbon-value">0.0</span> g COâ‚‚</strong></p>
Â  Â  Â  Â  Â  Â  Â  <p>Thatâ€™s like <span id="equivalent">0.000 g of rice</span></p>

Â  Â  Â  Â  Â  Â  Â  <!-- INFO BUTTON WITH HIDDEN TOOLTIP -->
Â  Â  Â  Â  Â  Â  Â  <div class="absolute top-4 right-4 group">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="w-6 h-6 rounded-full bg-neutral-700 text-white text-sm font-bold flex items-center justify-center hover:bg-neutral-600 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  ?
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="absolute right-0 top-8 w-72 bg-neutral-800 text-white text-xs rounded-lg p-4 shadow-2xl border border-neutral-700Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opacity-0 invisible pointer-events-noneÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  group-hover:opacity-100 group-hover:visible transition-all duration-300 z-20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold mb-3 text-sm">How we estimate your footprint:</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="list-disc list-inside space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Device energy consumption:</strong> Power used by your phone/computer to load and view the page.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Server energy consumption:</strong> Energy for hosting and serving the site content.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Network energy consumption:</strong> Data transfer over the internet between your device and the server.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="mt-3 text-neutral-400 text-xs">Average rate: ~0.0003 g COâ‚‚ per second (very low!).</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  <section id="thesis">
Â  Â  Â  Â  Â  Â  <h2>ğŸ“ Thesis Snippet</h2>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  <div id="thesis-content">Policy lag explains 62% of PMâ‚‚.â‚… exceedance in Jakarta (2020â€“2024).</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  <section id="learn">
Â  Â  Â  Â  Â  Â  <h2>ğŸ“¬ Learn With Me</h2>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  <p>Connect or tell me something interesting.</p>
Â  Â  Â  Â  Â  Â  Â  <form id="newsletter-form">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" placeholder="Tell me something" class="input" required>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn">Send</button>
Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </main>
Â  </div>

Â  <!-- MODAL -->
Â  <div id="modal-overlay">
Â  Â  <div class="modal-content">
Â  Â  Â  <button id="modal-close">Ã—</button>
Â  Â  Â  <div id="modal-body"></div>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // MODAL
Â  Â  const modal = document.getElementById('modal-overlay');
Â  Â  const modalBody = document.getElementById('modal-body');
Â  Â  const modalClose = document.getElementById('modal-close');

Â  Â  window.openModal = async function(url) {
Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch(url);
Â  Â  Â  Â  if (!res.ok) throw '';
Â  Â  Â  Â  const html = await res.text();
Â  Â  Â  Â  const parser = new DOMParser();
Â  Â  Â  Â  const doc = parser.parseFromString(html, 'text/html');
Â  Â  Â  Â  const content = doc.querySelector('.content-body') || doc.body;
Â  Â  Â  Â  modalBody.innerHTML = content.innerHTML;

Â  Â  Â  Â  doc.querySelectorAll('script').forEach(s => {
Â  Â  Â  Â  Â  const ns = document.createElement('script');
Â  Â  Â  Â  Â  ns.textContent = s.textContent;
Â  Â  Â  Â  Â  document.body.appendChild(ns);
Â  Â  Â  Â  Â  document.body.removeChild(ns);
Â  Â  Â  Â  });

Â  Â  Â  Â  modal.classList.add('active');
Â  Â  Â  Â  document.body.style.overflow = 'hidden';
Â  Â  Â  } catch {
Â  Â  Â  Â  modalBody.innerHTML = '<h2 style="color:#00b64c">Failed to load</h2>';
Â  Â  Â  Â  modal.classList.add('active');
Â  Â  Â  }
Â  Â  };

Â  Â  modalClose.onclick = () => {
Â  Â  Â  modal.classList.remove('active');
Â  Â  Â  setTimeout(() => { modalBody.innerHTML = ''; document.body.style.overflow = ''; }, 300);
Â  Â  };
Â  Â  modal.onclick = e => { if (e.target === modal) modalClose.click(); };
Â  Â  document.addEventListener('keydown', e => { if (e.key === 'Escape') modalClose.click(); });

Â  Â  // SEARCH
Â  Â  const searchInput = document.getElementById('search-input');
Â  Â  const searchResults = document.getElementById('search-results');
Â  Â  const layout = document.querySelector('.layout');

Â  Â  searchInput.addEventListener('input', () => {
Â  Â  Â  const q = searchInput.value.trim().toLowerCase();
Â  Â  Â  if (!q) {
Â  Â  Â  Â  layout.classList.remove('search-active');
Â  Â  Â  Â  searchResults.innerHTML = '';
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  layout.classList.add('search-active');

Â  Â  Â  const cards = document.querySelectorAll('#main-content .card');
Â  Â  Â  const matches = Array.from(cards).filter(card =>Â 
Â  Â  Â  Â  card.textContent.toLowerCase().includes(q)
Â  Â  Â  );

Â  Â  Â  if (matches.length === 0) {
Â  Â  Â  Â  searchResults.innerHTML = `<div class="card text-center p-8"><p>No results for "<strong>${searchInput.value}</strong>"</p></div>`;
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const header = `<h3 style="text-align:center;margin:1.5rem 0;color:var(--accent)">
Â  Â  Â  Â  ${matches.length} result${matches.length > 1 ? 's' : ''} for "<strong>${searchInput.value}</strong>"
Â  Â  Â  </h3>`;
Â  Â  Â  searchResults.innerHTML = header + matches.map(c => c.outerHTML).join('');
Â  Â  });

Â  Â  // THEME TOGGLE
Â  Â  document.getElementById('theme-toggle')?.addEventListener('click', () => {
Â  Â  Â  document.documentElement.classList.toggle('dark');
Â  Â  Â  document.documentElement.classList.toggle('light');
Â  Â  });

Â  Â  // CARBON COUNTER
Â  Â  let seconds = 0;
Â  Â  setInterval(() => {
Â  Â  Â  seconds++;
Â  Â  Â  document.getElementById('time-spent').textContent = seconds;
Â  Â  Â  const co2 = (seconds * 0.0003).toFixed(1);
Â  Â  Â  document.getElementById('carbon-value').textContent = co2;
Â  Â  Â  document.getElementById('equivalent').textContent = (co2 / 1.8).toFixed(3) + ' g of rice';
Â  Â  }, 1000);

Â  Â  // IQAIR
Â  Â  const KEY = 'f74e14f9-86c9-4246-8065-ec2018624690';
Â  Â  const locEl = document.getElementById('location-data');
Â  Â  const dispEl = document.getElementById('aqi-display');
Â  Â  if (navigator.geolocation) {
Â  Â  Â  locEl.textContent = 'Detecting...';
Â  Â  Â  navigator.geolocation.getCurrentPosition(p => {
Â  Â  Â  Â  fetch(`https://api.airvisual.com/v2/nearest_city?lat=${p.coords.latitude}&lon=${p.coords.longitude}&key=${KEY}`)
Â  Â  Â  Â  Â  .then(r => r.json())
Â  Â  Â  Â  Â  .then(d => {
Â  Â  Â  Â  Â  Â  if (d.status === 'success') {
Â  Â  Â  Â  Â  Â  Â  document.getElementById('city-name').textContent = d.data.city;
Â  Â  Â  Â  Â  Â  Â  document.getElementById('aqi-value').textContent = d.data.current.pollution.aqius;
Â  Â  Â  Â  Â  Â  Â  document.getElementById('co2-value').textContent = Math.round(400 + d.data.current.pollution.aqius * 0.5);
Â  Â  Â  Â  Â  Â  Â  document.getElementById('temp-value').textContent = d.data.current.weather.tp;
Â  Â  Â  Â  Â  Â  Â  const cats = ['Good','Moderate','Unhealthy for Sensitive','Unhealthy','Very Unhealthy','Hazardous'];
Â  Â  Â  Â  Â  Â  Â  const idx = Math.min(5, Math.floor(d.data.current.pollution.aqius / 50));
Â  Â  Â  Â  Â  Â  Â  document.getElementById('aqi-category').textContent = cats[idx];
Â  Â  Â  Â  Â  Â  Â  locEl.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  dispEl.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  });
Â  Â  Â  });
Â  Â  }
Â  </script>
</body>
</html>
